statefulset:
  enabled: true
  env:
  - name: POD_VAR
    value: actions
  - name: MAX_FILES_FOR_ACTION
    value: '1000'
  - name: ELASTIC_HOST
    valueFrom:
      configMapKeyRef:
        key: ELASTIC_HOST
        name: datatracker-config
  - name: ELASTIC_PORT
    valueFrom:
      configMapKeyRef:
        key: ELASTIC_PORT
        name: datatracker-config
  - name: REDIS_Q_HOST
    valueFrom:
      configMapKeyRef:
        key: REDIS_Q_HOST
        name: datatracker-config
  - name: REDIS_Q_PORT
    valueFrom:
      configMapKeyRef:
        key: REDIS_Q_PORT
        name: datatracker-config
  - name: REDIS_Cl_HOST
    valueFrom:
      configMapKeyRef:
        key: REDIS_Cl_HOST
        name: datatracker-config
  - name: REDIS_Cl_PORT
    valueFrom:
      configMapKeyRef:
        key: REDIS_Cl_PORT
        name: datatracker-config
  - name: REDIS_C_DBINDEX
    valueFrom:
      configMapKeyRef:
        key: REDIS_C_DBINDEX
        name: datatracker-config
  - name: REDIS_C_STATISTICS_DBINDEX
    valueFrom:
      configMapKeyRef:
        key: REDIS_C_STATISTICS_DBINDEX
        name: datatracker-config
  - name: REDIS_C_HOST
    valueFrom:
      configMapKeyRef:
        key: REDIS_C_HOST
        name: datatracker-config
  - name: REDIS_C_PORT
    valueFrom:
      configMapKeyRef:
        key: REDIS_C_PORT
        name: datatracker-config
  - name: REDIS_DB_TASK_INDEX
    valueFrom:
      configMapKeyRef:
        key: REDIS_DB_TASK_INDEX
        name: datatracker-config
  - name: PGSQL_HOST
    valueFrom:
      configMapKeyRef:
        key: PGSQL_HOST
        name: datatracker-config
  - name: PGSQL_PORT
    valueFrom:
      configMapKeyRef:
        key: PGSQL_PORT
        name: datatracker-config
  - name: PGSQL_DB
    valueFrom:
      configMapKeyRef:
        key: PGSQL_DB
        name: datatracker-config
  - name: SCAN_STATUS
    valueFrom:
      configMapKeyRef:
        key: SCAN_STATUS
        name: datatracker-config
  - name: TOTAL_TO_DO
    valueFrom:
      configMapKeyRef:
        key: TOTAL_TO_DO
        name: datatracker-config
  - name: TOTAL_DONE
    valueFrom:
      configMapKeyRef:
        key: TOTAL_DONE
        name: datatracker-config
  - name: PGSQL_PASS
    valueFrom:
      secretKeyRef:
        key: PGSQL_PASS
        name: datatracker-secrets
  - name: PGSQL_USER
    valueFrom:
      secretKeyRef:
        key: PGSQL_USER
        name: datatracker-secrets
  - name: SCAN_TYPE
    value: scan
  - name: SECLORE_HOST
    valueFrom:
      configMapKeyRef:
        key: SECLORE_HOST
        name: datatracker-config
  - name: SECLORE_PORT
    valueFrom:
      configMapKeyRef:
        key: SECLORE_PORT
        name: datatracker-config
  - name: MIP_HOST
    valueFrom:
      configMapKeyRef:
        key: MIP_HOST
        name: datatracker-config
  - name: MIP_PORT
    valueFrom:
      configMapKeyRef:
        key: MIP_PORT
        name: datatracker-config
  - name: ES_SERVICE_HOST
    valueFrom:
      configMapKeyRef:
        key: ES_SERVICE_HOST
        name: datatracker-config
  - name: ES_SERVICE_PORT
    valueFrom:
      configMapKeyRef:
        key: ES_SERVICE_PORT
        name: datatracker-config
  - name: ACTIONS_HOST
    valueFrom:
      configMapKeyRef:
        key: ACTIONS_HOST
        name: datatracker-config
  - name: ACTIONS_PORT
    valueFrom:
      configMapKeyRef:
        key: ACTIONS_PORT
        name: datatracker-config
  - name: SOURCE_IV
    valueFrom:
      secretKeyRef:
        key: password
        name: sourceiv
  - name: SOURCE_KEY
    valueFrom:
      secretKeyRef:
        key: password
        name: sourcekey
  - name: DELETED_FILES_Q
    valueFrom:
      configMapKeyRef:
        key: DELETED_FILES_Q
        name: datatracker-config
  image: me-west1-docker.pkg.dev/minereye-delivery-public/minereye-services/actions:v3.6.2
  imagePullPolicy: IfNotPresent
  imagePullSecrets:
    name: regcred
  ports:
  - containerPort: 3010
  replicas: 1
  resources:
    requests:
      memory: 100Mi
  securityContext:
    runAsUser: 1001
  volume:
    mode:
    - ReadWriteOnce
    mountPath: /store_deleted
    size: 40Gi
svc:
  enabled: true
  ports:
  - name: actions
    port: 3005
    protocol: TCP
    targetPort: 3005
  selector:
    app: actions
